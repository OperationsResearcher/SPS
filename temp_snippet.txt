function createNewUser() {















































    const kurumSelect = document.getElementById('newUserKurum');















































    const submitBtn = document.getElementById('newUserSubmitButton');































































































    const systemRole = document.getElementById('newUserRole').value;















































    const processRole = document.getElementById('newUserProcessRole').value;































































































    const formData = {















































        username: document.getElementById('newUserUsername').value.trim(),















































        first_name: document.getElementById('newUserFirstAd').value.trim(),















































        last_name: document.getElementById('newUserLastAd').value.trim(),















































        email: document.getElementById('newUserEmail').value.trim(),















































        password: document.getElementById('newUserPassword').value,















































        role: systemRole,















































        system_role: systemRole,















































        process_role: processRole || null,















































        kurum_id: kurumSelect ? (kurumSelect.disabled ? kurumSelect.options[kurumSelect.selectedIndex].value : kurumSelect.value) : null,















































        profile_photo: document.getElementById('newUserProfilUrl').value.trim()















































    };































































































    if (!formData.username || !formData.first_name || !formData.last_name || !formData.email || !formData.password || !formData.role || !formData.kurum_id) {















































        showToast('Lütfen tüm zorunlu alanları (*) doldurun!', 'warning');















































        return;















































    }































































































    // E-posta validasyonu















































    if (!validateEmail(formData.email)) {















































        showToast('warning', 'Lütfen geçerli bir e-posta adresi girin!', 'Validasyon Hatası');















































        document.getElementById('newUserEmail').classList.add('is-invalid');















































        return;















































    }































































































    if (formData.password.length < 6) {















































        showToast('Şifre en az 6 karakter olmalıdır!', 'warning');















































        return;















































    }































































































    if (submitBtn) {















































        submitBtn.disabled = true;















































        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Oluşturuluyor...';















































    }































































































    fetch('/api/admin/users/add', {















































        method: 'POST',















































        headers: {















































            'Content-Tip': 'application/json',















































        },















































        body: JSON.stringify(formData)















































    })















































    .then(res => res.json())















































    .then(data => {















































        if (!data.success) {















































            throw new Error(data.message || 'Kullanıcı oluşturulamadı.');















































        }















































        showToast(data.message, 'success');















































        const modal = bootstrap.Modal.getInstance(document.getElementById('newUserModal'));















































        modal.hide();















































        loadAdminUsers();















































        document.getElementById('newUserForm').reset();















































        clearProfilPhoto();















































    })















































    .catch(error => {















































        showToast('Kullanıcı oluşturulurken hata oluştu: ' + error.message, 'error');















































    })















































    .finally(() => {















































        if (submitBtn) {















































            submitBtn.disabled = false;































