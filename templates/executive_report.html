{% extends "base.html" %}

{% block title %}Yönetim Kurulu Özeti{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-0">
                <i class="fas fa-chart-line me-2"></i>
                Yönetim Kurulu Özeti
            </h2>
            <p class="text-muted">Kurumunuzun stratejik durumuna genel bakış</p>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-center border-primary">
                <div class="card-body">
                    <i class="fas fa-project-diagram fa-3x text-primary mb-3"></i>
                    <h3>{{ stats.total_processes }}</h3>
                    <p class="mb-0">Toplam Süreç</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-warning">
                <div class="card-body">
                    <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                    <h3>{{ stats.active_risks }}</h3>
                    <p class="mb-0">Aktif Risk</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-danger">
                <div class="card-body">
                    <i class="fas fa-fire fa-3x text-danger mb-3"></i>
                    <h3>{{ stats.critical_risks }}</h3>
                    <p class="mb-0">Kritik Risk</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center border-success">
                <div class="card-body">
                    <i class="fas fa-users fa-3x text-success mb-3"></i>
                    <h3>{{ stats.total_users }}</h3>
                    <p class="mb-0">Toplam Kullanıcı</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Risks -->
    {% if recent_risks %}
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-shield-alt me-2"></i>
                        Son Eklenen Riskler
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Risk Adı</th>
                                    <th>Kategori</th>
                                    <th>Risk Skoru</th>
                                    <th>Durum</th>
                                    <th>Tarih</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for risk in recent_risks %}
                                <tr>
                                    <td>{{ risk.risk_name }}</td>
                                    <td><span class="badge bg-secondary">{{ risk.risk_category }}</span></td>
                                    <td>
                                        <span class="badge bg-{{ 'danger' if risk.risk_score >= 20 else 'warning' if risk.risk_score >= 13 else 'info' if risk.risk_score >= 7 else 'success' }}">
                                            {{ risk.risk_score }} ({{ risk.risk_level }})
                                        </span>
                                    </td>
                                    <td>
                                        <span class="badge bg-{{ 'success' if risk.status == 'mitigated' else 'warning' if risk.status == 'accepted' else 'info' if risk.status == 'transferred' else 'secondary' }}">
                                            {{ 'Azaltıldı' if risk.status == 'mitigated' else 'Kabul Edildi' if risk.status == 'accepted' else 'Transfer Edildi' if risk.status == 'transferred' else 'Açık' }}
                                        </span>
                                    </td>
                                    <td>{{ risk.created_at.strftime('%d.%m.%Y') }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Additional Sections -->
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">Hızlı Erişim</h5>
                </div>
                <div class="card-body">
                    <div class="list-group">
                        <a href="{{ url_for('main.risks') }}" class="list-group-item list-group-item-action">
                            <i class="fas fa-shield-alt me-2"></i>
                            Risk Yönetimi
                        </a>
                        <a href="{{ url_for('main.competencies') }}" class="list-group-item list-group-item-action">
                            <i class="fas fa-users-cog me-2"></i>
                            Yetkinlik Matrisi
                        </a>
                        <a href="{{ url_for('main.mtbp') }}" class="list-group-item list-group-item-action">
                            <i class="fas fa-project-diagram me-2"></i>
                            MTBP (Mid-Term Business Plan)
                        </a>
                        <a href="{{ url_for('main.muda_hunter') }}" class="list-group-item list-group-item-action">
                            <i class="fas fa-search me-2"></i>
                            Muda Hunter
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">Notlar</h5>
                </div>
                <div class="card-body">
                    <p class="text-muted">
                        Bu özet sayfası kurumunuzun stratejik durumuna genel bir bakış sunmaktadır.
                        Detaylı analizler için ilgili modüllere gidebilirsiniz.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}




